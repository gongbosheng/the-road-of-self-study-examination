# 一、 指针和指针变量

## （1）指针

**含义:**  C语言中指针是一种数据类型。指针是存放数据的内存单元地址。计算机系统的内存拥有大量的存储单元(每个存储单元的大小为1字节)，为了便于管理，必须为每个存储单元编号，该编号就是存储单元的“地址”。每个存储单元拥有一个唯一的地址。指针变量除了可以存放变量的地址外，还可以存放其他数据的地址，例如可以存放数组和函数的地址。

## （2）指针变量

**[格式]**  数据类型符 *指针变量名[=初始地址值,;

**[功能]**  定义指向“数据类型符”的变量或数组的指针变量，同时为其赋初值。

```c
int a, b;
int *p = &a;  // 赋值给指针变量需要 地址符&
int *q = p;   // 已经初始化的指针变量作为初值不需要地址符 &
p = &b        // 赋址
*p = 1        // 赋值

// int i; static int *p =&i;   不能用 auto 变量的地址去初始化 static 型指针
```

**[说明]**

1. 表示定义的是一个指针变量。指针变量的前面必须有“*”号。
2. 在定义指针变量的同时也可以定义普通变量或数组等。
3. “ 数据类型符”是指针变量所指向变量的数据类型，可以是任何基本数据类型，也可以是其他数据类型。
4. “初始地址值” 通常是“&变量名”“&数组元素” 或“一维数组名”，这里的变量或数组必须是已定义的。
5. 在定义指针变量时，可以只给部分指针变量赋初值。
6. 指针变量的初始化，除了可以是已定义变量的地址，也可以是已初始化的同类型的指针变量，也可以是NUL L (空指针)。
7. 指针变量初始化时，指针变量的“数据类型符”必须与其“初始地址值”中保存的数据的类型相同。

## （3）取地址符 &


取地址运算符“&”的功能是取变量的地址，它是单目运算符。

取地址运算符的运算对象必须是已经定义的变量或数组元素，但不能是数组名。（数组名存放的就是数组的首地址）

运算结果是运算对象的地址。

例如: &a，&a[10]

## （4） 指针运算符 *

指针运算符“*”的功能是取指针变量所指向地址中的内容，与取地址运算符“&”的运算是互逆的，它是单目运算符。

指针运算符的运算对象必须是地址，可以是已赋值的指针变量，也可以是变量或数组元素的地址，但不能是整数，也不能是非地址型的变量。

运算结果就是地址对应的变量。

## （5） 一级指针和二级指针

int *p ：  一级指针，表示p所指向的地址里面存放的是一个int类型的值

int **p ：二级指针，表示p所指向的地址里面存放的是一个指向int类型的指针（即p指向的地址里面存放的是一个指向int的一级指针）

```c
int a=5;     //定义整形变量
int *p=&a;   //定义一个指针指向这个变量
int **p1=&p; //定义一个二级指针指向p指针
/*   那么取出5的方式都有哪些呢？ */
printf("a=%d",a);
printf("a=%d",*p);
printf("a=%d",**p1);

//////////////////////////////

#include <stdio.h>

void main()
{
    int a = 100, *p1 = &a, **p2;
    p2 = &p1;
    printf("%d\n", **p2);
}
```

## （6） \*&p  &\*p

根据运算优先级，*&p 等价于*(&p)。&*p 等价于&(*p)。

1. 如果p是一个int变量，那么\*&p = p；而&\*p是非法的，因为\*p非法。 比如int p =10；那么*&p = \*(&p) = p = 10（即从p的地址取值），而&\*p = &(\*p) 则非法，因为p=10，\*10是取内存地址为10的值，这在c语言中是不合法的。
2. 如果p是 int *指针变量，那么\*&p = p，&\*p = p，都是p，但还没定义p指向哪，存的是谁的地址。



# 二、指针和数组

## （1） 指针和一维数组

数组的指针是指向数组在内存的起始地址，数组元素的指针是指向数组元素在内存的起始地址。

```c
int array[10], *p = array;
```

## （2） 指针和一维数组元素

```c
int array[10], *p = &array[1];  // array[1] 既是把数组中从下标 1 开始的元素都赋值给 p ， p 既是数组。

// 指针表示数组元素
*(p+0)=*p=p[0]
*(p+1)=p[1]
```

使用指针变量时要注意的问题:

- p++:合法，因为p是指针变量，++只能用于变量。
- a++:不合法，因为a是数组名，其值是数组元素的首地址，是常量，程序运行期间值固定不变。

# 三、 指针的算数运算

指针变量可以进行的算术运算包括:

1. 指针变量士整数。
2. 指针变量++/++指针变量。
3. 指针变量--/--指针变量。
4. 指针变量1-指针变量2。

两个类型相同的指针变量可以运用关系运算符比较大小，表示两个指针变量所指向地址位置的前后关系，即前者为小，后者为大。需要注意的是，如果两个指针变量不是指向同一个数组，则比较大小没有实际意义。



# 四、指针和函数

指针变量作为函数参数:指针变量既可以作为函数的形参，也可以作为函数的实参。指针变量作为函数参数，形参和实参之间的数据传递方式本质上是值传递，只是在调用函数时传递的内容是地址，这样使得形参变量和实参变量指向同一个变量。若被调函数中有对形参所指变量内存的改变，实际上是改变了实参所指变量的内容。

```c
float* func()
{
	float *a;
	return *a;
}
```

指针函数的返回值必须用指针接收。



```c
void main()
{
  int inv(int *x, int n);
  int *c = {1, 2};
  inv(*c);
}

int inv(int *x, int n)
{
  return 1;
}
```



# 五、指针数组

指针数组的定义:  指针数组是数组中的元素均为指针变量。

**[格式]**  数据类型符*指针数组名[数组长度];

**[功能]**  定义指针数组，有“长度”个数组元素。

**[说明]**

- 指针数组名是标识符，前面必须加“*” 号。
- 定义指针数组的同时可以定义普通变量、数组和指针变量等。
- “数据类型符” 可以是任何基本数据类型。“ 数据类型符”不是指针数组元素中存放的数据类型，而是其所指向数据的数据类型。

```c
#include <stdio.h>

void main()
{   
    int f = 8;
    int *a = &f , *b = &f, *c = &f, d;
    int *array[] = {a, b, c, &d};
    printf("%d\n", *array[0]);
}


/////////////////////////////////

#include <stdio.h>

void main()
{   
    char *p[] = {"china", "america", "russia"};
    printf("%s\n", p[1]);

    char *q[4], s[5] = "hello" ;
    q[0] = s;
    printf("%s\n", q[0]);
}
```





